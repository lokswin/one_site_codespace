# file: debug.txt

sudo chown -R $(whoami):$(whoami) ./


docker stop $(docker ps -a -q)

docker build --build-arg VNC_PASSWORD="" -t onepage-browser-container .

docker run -d --name test-container -p 6080:6080 onepage-browser-container

docker exec -it test-container /bin/bash

docker cp test-container:/tmp/log/onepage-browser-container/. ./logiiisss67867

rm -rf ./logiiisss67867/*;docker cp test-container:/tmp/log/onepage-browser-container/. ./logiiisss67867

rm -rf ./logiiisss67867/*;

ip addr show eth0 | grep inet




docker rm test-container && docker build --build-arg VNC_PASSWORD="" -t onepage-browser-container . && docker run -d --name test-container -p 6080:6080 onepage-browser-container


run

docker build --build-arg VNC_PASSWORD="" --build-arg CACHEBUST=$(date +%s) -t onepage-browser-container . ;docker stop test-container;docker rm test-container;docker run -d --name test-container -p 5901:59010 -p 6080:6080 onepage-browser-container

logs
rm -rf ./logiiisss67867/*;docker cp test-container:/var/log/vnc/. ./logiiisss67867


update docker version

sudo curl -L "https://github.com/docker/compose/releases/download/$(curl -s https://api.github.com/repos/docker/compose/releases/latest | grep -oP '"tag_name": "\K(.*)(?=")')/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose




docker-compose down
export GUACD_WEB_HOSTNAME="web_one" GUAC_USER="testuser" GUAC_PASS="testpass" TOTP_SECRET_KEY="testtotpkey" VNC_HOSTNAME="localhost" VNC_PORT="5901" GUACD_HOSTNAME="test_guacd" GUACD_PORT="4822" DEBUG_ALL="true" WEB_PORT="8080" && docker compose -f docker-compose.yml up -d



curl test_guacd:4822

cat /etc/guacamole/guacamole.properties && cat /etc/guacamole/user-mapping.xml

notes
      - "127.0.0.1:555:555"  # Private, restricted to localhost


d@d:/home/u/git_dirs/one_site_codespace# docker exec -it guacd_server sh
/ $ nc -z localhost 4822
/ $ nc -vz localhost 4822
nc: connect to localhost (::1) port 4822 (tcp) failed: Connection refused
Connection to localhost (127.0.0.1) 4822 port [tcp/*] succeeded!

nc -z localhost 4822
grafana:
docker exec -it grafana sh
getent hosts prometheus
curl -u admin:admin http://localhost:3000/api/datasources
nc -zv prometheus 9090
curl http://prometheus:9090/-/healthy


http://localhost:8080/guacamole

docker run --rm guacamole/guacamole:1.5.5 /opt/guacamole/bin/initdb.sh --postgresql > i
nitdb.sql